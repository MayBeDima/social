"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[516],{3796:function(e,t,s){s.d(t,{S:function(){return l}});var a=s(1413),r=s(2791),o=s(3531),n=s(7689),i=s(184);function l(e){return function(t){var s=(0,n.s0)(),l=(0,o.v9)((function(e){return{isAuth:e.auth.userData.isAuth}}));return(0,r.useEffect)((function(){l.isAuth||s("/login")}),[l.isAuth,s]),(0,i.jsx)(e,(0,a.Z)({},t))}}},2516:function(e,t,s){s.r(t),s.d(t,{default:function(){return E}});var a=s(2791),r="myposts_posts__oLJDR",o="myposts_textareaBox__N6PZG",n="myposts_createPostBtn__GFc49",i={item:"post_item__Jhl9K",avatar:"post_avatar__kTjek"},l=s(184);function c(e){return(0,l.jsxs)("div",{className:i.item,children:[(0,l.jsx)("div",{className:i.avatar,children:(0,l.jsx)("img",{src:e.imgSrc?e.imgSrc:"https://bronk.club/uploads/posts/2023-02/1676963697_bronk-club-p-obichnaya-otkritka-vkontakte-3.png",alt:"avatar"})}),e.message,(0,l.jsx)("br",{}),(0,l.jsxs)("span",{children:[e.likesCount," likes"]})]})}var u=s(6508),d=s(3531),p=(0,d.$j)((function(e){return{state:e.profileData.postsData}}),{addPost:u.q2,changePostTextArea:u.JU})((function(e){console.log(e);var t=e.state.map((function(e){return(0,l.jsx)(c,{message:e.message,id:e.id,likesCount:e.likesCount,imgSrc:e.imgSrc})}));return(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)("h3",{children:"MyPosts"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:o,children:(0,l.jsx)("textarea",{onChange:function(t){var s=t.target.value;e.changePostTextArea(s)},placeholder:"Enter text",value:e.state.textAreaPost})}),(0,l.jsx)("div",{className:n,children:(0,l.jsx)("button",{onClick:function(){e.addPost()},children:"Create Post"})})]}),t]})})),f={profile:"profile_profile__kpOpt"},m={profileInfo:"profileinfo_profileInfo__oUfY3",wallpaper:"profileinfo_wallpaper__ICupb",descriptionBox:"profileinfo_descriptionBox__25-4I",description:"profileinfo_description__P-Jyv"},h=s(3405),x=s(9439),_={statusBox:"status_statusBox__lDNeW",statusTitle:"status_statusTitle__nwsyL",status:"status_status__wKs35"};function j(e){var t=(0,a.useState)(!1),s=(0,x.Z)(t,2),r=s[0],o=s[1],n=(0,a.useState)(e.status),i=(0,x.Z)(n,2),c=i[0],u=i[1];(0,a.useEffect)((function(){u(e.status)}),[e.status]);return(0,l.jsxs)("div",{className:_.statusBox,children:[(0,l.jsx)("span",{className:_.statusTitle,children:"Status: "}),r?(0,l.jsx)("span",{children:(0,l.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},onBlur:function(){e.updateStatus(c),o(!1)},value:c,autoFocus:!0})}):(0,l.jsx)("span",{children:e.isOwner?(0,l.jsx)("span",{onDoubleClick:function(){return o(!0)},className:_.status,children:c||"No status"}):(0,l.jsx)("span",{className:_.status,children:c||"No status"})})]})}var v={avatarBox:"photo_avatarBox__3vb20",addPhotoBtn:"photo_addPhotoBtn__ZTUuZ"},b=s(7297);function g(e){return(0,l.jsxs)("div",{className:v.avatarBox,children:[(0,l.jsx)("img",{src:e.photos.large?e.photos.large:b,alt:"\u0430\u0432\u0430\u0442\u0430\u0440"}),e.isOwner&&(0,l.jsxs)("div",{className:v.addPhotoBtn,children:[(0,l.jsx)("input",{type:"file",id:"load-photo",onChange:function(t){t.target.files.length&&e.setPhoto(t.target.files[0])}}),(0,l.jsx)("label",{htmlFor:"load-photo",children:"Load photo"})]})]})}var N=s(1413),k=s(4165),w=s(5861),A={editFormBox:"editform_editFormBox__6q2tV",editForm:"editform_editForm__oFwEN",inputBox:"editform_inputBox__qT+TM",errorMessage:"editform_errorMessage__2xa2o",contacts:"editform_contacts__ORN+S",input:"editform_input__gAn+t",error:"editform_error__xYE8w",contactsContainer:"editform_contactsContainer__bTpEs",otherInfoContainer:"editform_otherInfoContainer__Qou5f",checkboxContainer:"editform_checkboxContainer__oI3mQ",btnSubmit:"editform_btnSubmit__Nh-4G",errorForm:"editform_errorForm__MX1Ev"},F=s(9195),C=s(1694),I=s.n(C);function B(e){var t=(0,F.cI)({mode:"onChange"}),s=t.clearErrors,a=t.setError,r=t.register,o=t.handleSubmit,n=t.formState,i=n.errors,c=n.isValid,u=function(){var t=(0,w.Z)((0,k.Z)().mark((function t(s){return(0,k.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setUserInfo(s,a);case 2:e.setEditMode(!1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,l.jsxs)("div",{className:A.editFormBox,children:[(0,l.jsxs)("form",{className:A.editForm,onSubmit:o(u),onChange:function(){return s("invalidDatas")},children:[(0,l.jsxs)("div",{className:A.otherInfoContainer,children:[(0,l.jsxs)("div",{className:A.inputBox,children:[(0,l.jsx)("label",{htmlFor:"fullName",children:"Full name"}),(0,l.jsx)("input",(0,N.Z)({className:i.fullName?I()(A.input,A.error):A.input,type:"text",name:"fullName",placeholder:"Full name"},r("fullName",{value:e.profile.fullName||null,required:"This is require field",minLength:{value:4,message:"Please enter at least 4 characters"},maxLength:{value:15,message:"Please enter at most 15 characters"}}))),i.fullName&&(0,l.jsx)("div",{className:A.errorMessage,children:i.fullName.message})]}),(0,l.jsxs)("div",{className:I()(A.inputBox,A.checkboxContainer),children:[(0,l.jsx)("label",{className:A.label,htmlFor:"lookingForAJob",children:"Looking for a job"}),(0,l.jsx)("input",(0,N.Z)((0,N.Z)({name:"lookingForAJob",type:"checkbox"},r("lookingForAJob",{value:e.profile.lookingForAJob||!1})),{},{className:A.checkbox}))]}),(0,l.jsxs)("div",{className:A.inputBox,children:[(0,l.jsx)("label",{htmlFor:"aboutMe",children:"Job description"}),(0,l.jsx)("textarea",(0,N.Z)({className:i.lookingForAJobDescription?I()(A.input,A.error):A.input,type:"text",name:"lookingForAJobDescription",placeholder:"Job description"},r("lookingForAJobDescription",{value:e.profile.lookingForAJobDescription||null,required:"This is require field",minLength:{value:4,message:"Please enter at least 4 characters"},maxLength:{value:40,message:"Please enter at most 40 characters"}}))),i.lookingForAJobDescription&&(0,l.jsx)("div",{className:A.errorMessage,children:i.lookingForAJobDescription.message})]}),(0,l.jsxs)("div",{className:A.inputBox,children:[(0,l.jsx)("label",{htmlFor:"aboutMe",children:"Some about me"}),(0,l.jsx)("textarea",(0,N.Z)({className:i.aboutMe?I()(A.input,A.error):A.input,type:"text",name:"aboutMe",placeholder:"About me"},r("aboutMe",{value:e.profile.aboutMe||null,required:"This is require field",minLength:{value:4,message:"Please enter at least 4 characters"},maxLength:{value:40,message:"Please enter at most 40 characters"}}))),i.aboutMe&&(0,l.jsx)("div",{className:A.errorMessage,children:i.aboutMe.message})]})]}),(0,l.jsxs)("div",{className:A.contactsContainer,children:[(0,l.jsx)("h3",{children:"Contacts"}),(0,l.jsx)("div",{className:A.contacts,children:Object.keys(e.profile.contacts).map((function(t){return(0,l.jsxs)("div",{className:A.inputBox,children:[(0,l.jsx)("label",{htmlFor:t,children:t[0].toUpperCase()+t.substring(1)}),(0,l.jsx)("input",(0,N.Z)({className:i.contacts&&!i.contacts[t]||!i.contacts?A.input:I()(A.input,A.error),type:"text",name:t,placeholder:t[0].toUpperCase()+t.substring(1)},r("contacts[".concat(t,"]"),{value:e.profile.contacts[t]||null,pattern:{value:/(https:\/\/www\.|http:\/\/www\.|https:\/\/|http:\/\/)[a-zA-Z]{2,}(\.[a-zA-Z]{2,})(\.[a-zA-Z]{2,})?\/[a-zA-Z0-9]{2,}|((https:\/\/www\.|http:\/\/www\.|https:\/\/|http:\/\/)?[a-zA-Z]{2,}(\.[a-zA-Z]{2,})(\.[a-zA-Z]{2,})?)|(https:\/\/www\.|http:\/\/www\.|https:\/\/|http:\/\/)?[a-zA-Z0-9]{2,}\.[a-zA-Z0-9]{2,}\.[a-zA-Z0-9]{2,}(\.[a-zA-Z0-9]{2,})?/g,message:"Please enter a valid url"}}))),i.contacts&&i.contacts[t]&&(0,l.jsx)("div",{className:A.errorMessage,children:i.contacts&&i.contacts[t].message})]})}))})]}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{className:A.btnSubmit,type:"submit",value:"Save",disabled:!c})})]}),i.serverError&&(0,l.jsx)("div",{className:A.errorForm,children:i.serverError.message})]})}var P={userInfo:"userinfo_userInfo__RRYT8",fullName:"userinfo_fullName__oIenW",addInfo:"userinfo_addInfo__vyKuE",contactTitle:"userinfo_contactTitle__PVmf6",descrJob:"userinfo_descrJob__c3Ljw",aboutTitle:"userinfo_aboutTitle__dAtUU",editBtn:"userinfo_editBtn__yLNO9",btnSubmit:"userinfo_btnSubmit__Jgvj7"},S=function(e){var t=e.contactTitle,s=e.contactValue;return(0,l.jsxs)("li",{children:[(0,l.jsxs)("span",{className:P.contactTitle,children:[t,": "]}),(0,l.jsx)("span",{children:s||"-"})]})};function Z(e){var t=(0,a.useState)(!1),s=(0,x.Z)(t,2),r=s[0],o=s[1];return(0,l.jsxs)("div",{className:P.userInfo,children:[e.isOwner&&(0,l.jsx)("button",{onClick:function(){return o(!0)},className:P.editBtn,children:"Edit"}),r&&(0,l.jsx)(B,{setEditMode:o,profile:e.profile,setUserInfo:e.setUserInfo}),(0,l.jsx)("h1",{className:P.fullName,children:e.profile.fullName}),(0,l.jsxs)("div",{className:P.addInfo,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:e.profile.lookingForAJob?"I need a job":"Do not find a job"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:P.descrJob,children:"Description: "}),e.profile.lookingForAJobDescription||"-"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Contacts"}),(0,l.jsx)("ul",{children:Object.keys(e.profile.contacts).map((function(t){return(0,l.jsx)(S,{contactTitle:t,contactValue:e.profile.contacts[t]},t)}))})]})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{className:P.aboutTitle,children:"Some about me: "}),e.profile.aboutMe||"-"]})]})}function T(e){return e.profile?(0,l.jsxs)("div",{className:m.profileInfo,children:[(0,l.jsx)("div",{className:m.wallpaper,children:(0,l.jsx)("img",{src:"https://img.pikbest.com/backgrounds/20220119/blue-purple-gradient-fluid-abstract-minimalistic-background_6241863.jpg!w700wp",alt:"info"})}),(0,l.jsxs)("div",{className:m.descriptionBox,children:[(0,l.jsxs)("div",{className:m.description,children:[(0,l.jsx)(g,{isOwner:e.isOwner,photos:e.profile.photos,setPhoto:e.setPhoto}),(0,l.jsx)(Z,{isOwner:e.isOwner,profile:e.profile,setUserInfo:e.setUserInfo})]}),(0,l.jsx)(j,{isOwner:e.isOwner,status:e.status,updateStatus:e.updateStatus})]})]}):(0,l.jsx)(h.Z,{})}function J(e){return(0,l.jsxs)("div",{className:f.profile,children:[(0,l.jsx)(T,{setPhoto:e.setPhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,setUserInfo:e.setUserInfo}),(0,l.jsx)(p,{})]})}var y=s(7689),M=s(3796),D=function(e){return e.profileData.profile},O=function(e){return e.profileData.status},U=s(473);var E=(0,M.S)((function(e){var t=(0,d.v9)(U.DQ),s=(0,d.v9)(D),r=(0,d.v9)(O),o=(0,d.I0)(),n=(0,y.UO)().userId;n||(n=t);(0,a.useEffect)((function(){o((0,u.PR)(n)),o((0,u.lR)(n))}),[o,n]);return(0,l.jsx)(J,{profile:s,status:r,setUserInfo:function(e,t){return o((0,u.CX)(e,t))},updateStatus:function(e){return o((0,u.Nf)(e))},setPhoto:function(e){return o((0,u.UI)(e))},isOwner:n===t})}))}}]);
//# sourceMappingURL=516.bb66ce99.chunk.js.map